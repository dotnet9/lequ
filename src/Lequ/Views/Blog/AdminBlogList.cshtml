@using Lequ.Common.Helper
@using Lequ.Model.Models
@using Lequ.Model.ViewModels
@model PagingViewModelBase<Blog>
@{
    ViewData["Title"] = "AdminBlogList";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    string[] styles = { "post-category text-white bg-secondary mb-3", "post-category text-white bg-success mb-3", "post-category text-white bg-warning mb-3" };
}

<h1>Blog List</h1>
<br/>
<a href="/Blog/Add/" class="btn btn-primary">New</a>
<table class="table table-bordered">
    <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Status</th>
        <th>Album</th>
        <th>Category</th>
        <th>Tag</th>
        <th>Create User</th>
        <th>Create Date</th>
        <th>Update User</th>
        <th>Update Date</th>
        <th>Control</th>
    </tr>
    @if (Model != null && Model.Datas != null)
    {
        @foreach (var item in Model.Datas)
        {
            <tr>
                <td>@item.ID</td>
                <td>
                    <a href="/Blog/Details?id=@item.ID">@item.Title</a>
                </td>
                <td>@item.StatusEnum</td>
                <td>
                    @if (item.BlogAlbums != null)
                    {
                        @foreach (var album in item.BlogAlbums)
                        {
                            <span class="@styles[new Random().Next(3)]">
                                <a href="/Blog/ListByAlbum?albumID=@album?.Album?.ID">
                                    <i class="fas fa-eye"></i> @album?.Album?.Name
                                </a>
                            </span>
                        }
                    }
                </td>
                <td>
                    @if (item.BlogCategories != null)
                    {
                        @foreach (var category in item.BlogCategories)
                        {
                            <span class="@styles[new Random().Next(3)]">
                                <a href="/Blog/ListByCategory?categoryID=@category?.Category?.ID">
                                    <i class="fas fa-eye"></i> @category?.Category?.Name
                                </a>
                            </span>
                        }
                    }
                </td>
                <td>
                    @if (item.BlogTags != null)
                    {
                        @foreach (var tag in item.BlogTags)
                        {
                            <span class="@styles[new Random().Next(3)]">
                                <a href="/Blog/ListByTag?tagID=@tag?.Tag?.ID">
                                    <i class="fas fa-eye"></i> @tag?.Tag?.Name
                                </a>
                            </span>
                        }
                    }
                </td>
                <td>@item.CreateUser?.Name</td>
                <td>@item.CreateDateString</td>
                <td>@item.UpdateUser?.Name</td>
                <td>@item.UpdateDateString</td>
                <td>
                    <a href="/Blog/Delete?id=@item.ID" class="btn btn-danger">Delete</a>
                    <a href="/Blog/Update?id=@item.ID" class="btn btn-warning">Edit</a>
                    <a href="/Blog/Details?id=@item.ID" class="btn btn-success">Detail</a>
                    <a href="/Comment/AdminBlogCommentList?blogID=@item.ID" class="btn btn-dark">Message(@item.Comments?.Count)</a>
                </td>
            </tr>
        }
    }
</table>
@if (Model != null && Model.PageCount > 1)
{
    <div class="card-footer">
        <nav aria-label="Contacts Page Navigation">
            <ul class="pagination justify-content-center m-0">
                @for (var i = 1; i <= Model.PageCount; i++)
                {
                    <li class='@(Model.PageIndex == i ? "page-item active" : "page-item")'>
                        <a class="page-link" href="/Blog/AdminBlogList?page=@i">@i</a>
                    </li>
                }
            </ul>
        </nav>
    </div>
}