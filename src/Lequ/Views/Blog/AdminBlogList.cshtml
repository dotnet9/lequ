@model Lequ.Models.Blogs.AdminBlogListViewModel
@{
    ViewData["Title"] = "AdminBlogList";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    string[] styles = { "post-category text-white bg-secondary mb-3", "post-category text-white bg-success mb-3", "post-category text-white bg-warning mb-3" };
}

<h1>Blog List</h1>
<br />
<a href="/Blog/Add/" class="btn btn-primary">New</a>
<table class="table table-bordered">
    <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Status</th>
        <th>Album</th>
        <th>Category</th>
        <th>Tag</th>
        <th>Create User</th>
        <th>Create Date</th>
        <th>Update User</th>
        <th>Update Date</th>
        <th>Control</th>
    </tr>
    @if (Model != null && Model.Blogs != null)
    {
        @foreach (var item in Model.Blogs)
        {
            <tr>
                <td>@item.ID</td>
                <td><a href="/Blog/Details?id=@item.ID">@item.Title</a></td>
                <td>@item.Status</td>
                <td>
                    @if (item.BlogAlbums != null)
                    {
                        @foreach (var album in item.BlogAlbums)
                        {
                            <span class="@((styles[new Random().Next(3)]))">
                                <a href="/Blog/ListByAlbum?albumID=@album?.Album?.ID"><i class="fas fa-eye"></i> @album?.Album?.Name</a>
                            </span>
                        }
                    }
                </td>
                <td>
                    @if (item.BlogCategories != null)
                    {
                        @foreach (var category in item.BlogCategories)
                        {
                            <span class="@((styles[new Random().Next(3)]))">
                                <a href="/Blog/ListByCategory?categoryID=@category?.Category?.ID"><i class="fas fa-eye"></i> @category?.Category?.Name</a>
                            </span>
                        }
                    }
                </td>
                <td>
                    @if (item.BlogTags != null)
                    {
                        @foreach (var tag in item.BlogTags)
                        {
                            <span class="@((styles[new Random().Next(3)]))">
                                <a href="/Blog/ListByTag?tagID=@tag?.Tag?.ID"><i class="fas fa-eye"></i> @tag?.Tag?.Name</a>
                            </span>
                        }
                    }
                </td>
                <td>@item.CreateUser?.Name</td>
                <td>@(((DateTime)(item.CreateDate??DateTime.Now)).ToString("yyyy-MM-dd HH:mm:ss"))</td>
                <td>@item.UpdateUser?.Name</td>
                <td>@(((DateTime)(item.UpdateDate??DateTime.Now)).ToString("yyyy-MM-dd HH:mm:ss"))</td>
                <td>
                    <a href="/Blog/Delete?id=@item.ID" class="btn btn-danger">Delete</a>
                    <a href="/Blog/Update?id=@item.ID" class="btn btn-warning">Edit</a>
                    <a href="/Blog/Details?id=@item.ID" class="btn btn-success">Detail</a>
                    <a href="" class="btn btn-dark">Yorumlar</a>
                </td>
            </tr>
        }
    }
</table>
@if (Model != null)
{
    @for (int i = 1; i <= Model.PageCount; i++)
    {
        <a href="/Blog/AdminBlogList?page=@i" class='@(Model.PageIndex == i ? "btn btn-primary" : "btn btn-outline-dark")'>@i</a>
    }
}
